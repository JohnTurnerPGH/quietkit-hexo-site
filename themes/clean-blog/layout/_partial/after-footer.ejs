<!-- jQuery -->
<script src="/js/jquery-2.1.4.min.js"></script>

<!-- Bootstrap -->
<script src="/js/bootstrap.min.js"></script>

<!-- Gallery -->
<!-- <script src="//cdnjs.cloudflare.com/ajax/libs/featherlight/1.3.5/featherlight.min.js" type="text/javascript" charset="utf-8"></script> -->

<!-- adding intersection observer js file for quicklink backwards compatability -->
<script src="/js/intersection-observer.min.js"></script>

<!-- Include quicklink from dist -->
<script src="/js/quicklink.umd.js"></script>
<!-- Initialize (you can do this whenever you want) -->
<script>
  window.addEventListener("load", () => {
    quicklink({
      origins: ["quietkit.com"],
    });
  });
</script>

<!-- NEW script tag to manually add sw to every page in site -->

<script>
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker
      .register("https://quietkit.com/service-worker.js")
      .then(
        function (registration) {
          console.log("Service worker registration succeeded:", registration);
        },
        /*catch*/ function (error) {
          console.log("Service worker registration failed:", error);
        }
      );
  } else {
    console.log("Service workers are not supported.");
  }
</script>

<!-- OLD script tag to manually add sw to every page in site -->
<!-- <script>'use strict'; 'serviceWorker' in navigator && navigator.serviceWorker.register('https://quietkit.com/service-worker.js').then(function (a) { a.onupdatefound = function () { var b = a.installing; b.onstatechange = function () { switch (b.state) { case 'installed': navigator.serviceWorker.controller ? console.log('New or updated content is available.') : console.log('Content is now available offline!'); break; case 'redundant': console.error('The installing service worker became redundant.'); } } } }).catch(function (a) { console.error('Error during service worker registration:', a) });</script> -->

<!-- Disqus Comments -->
<% if (theme.comments && theme.comments.disqus_shortname){ %>
<script type="text/javascript">
  var disqus_shortname = "<%= theme.comments.disqus_shortname %>";

  (function () {
    var dsq = document.createElement("script");
    dsq.type = "text/javascript";
    dsq.async = true;
    dsq.src =
      "//" +
      disqus_shortname +
      ".disqus.com/<% if (page.comments){ %>embed.js<% } else { %>count.js<% } %>";
    (
      document.getElementsByTagName("head")[0] ||
      document.getElementsByTagName("body")[0]
    ).appendChild(dsq);
  })();
</script>
<% } %>
